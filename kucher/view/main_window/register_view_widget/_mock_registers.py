#
# Copyright (C) 2018 Zubax Robotics OU
#
# This file is part of Kucher.
# Kucher is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License
# as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.
# Kucher is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty
# of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
# You should have received a copy of the GNU General Public License along with Kucher.
# If not, see <http://www.gnu.org/licenses/>.
#
# Author: Pavel Kirienko <pavel.kirienko@zubax.com>
#

from view.device_model_representation import Register


def get_mock_registers():
    """
    This function is only needed for unit testing. I decided to move it into a separate file because
    it is quite cumbersome and I don't want to contaminate the sources with large bundles of unrelated code.
    """
    from popcop.standard.register import Flags, ValueType

    # noinspection PyShadowingBuiltins
    def mock(cached, default, min, max, mutable, persistent, ts_device, ts_mono, **kwargs):
        flags = Flags()
        flags.mutable = mutable
        flags.persistent = persistent

        def set_get_callback(value):
            raise NotImplementedError('Mock objects do not model the device')

        return Register(value=cached,
                        default_value=default,
                        min_value=min,
                        max_value=max,
                        flags=flags,
                        update_timestamp_device_time=ts_device,
                        update_timestamp_monotonic=ts_mono,
                        set_get_callback=set_get_callback,
                        **kwargs)
    return [
        mock(name='exec_aux_command', type_id=ValueType.I16, cached=[-1], default=[-1], min=[-1], max=[9999],
             mutable=True, persistent=True, ts_device=167.120176761, ts_mono=11474.095037309),
        mock(name='vsi.pwm_freq_khz', type_id=ValueType.F32, cached=[45.000003814697266], default=[0.0], min=[0.0],
             max=[50.0], mutable=True, persistent=True, ts_device=167.150843761, ts_mono=11474.095083372),
        mock(name='ctl.spinup_durat', type_id=ValueType.F32, cached=[1.5], default=[1.5], min=[0.10000000149011612],
             max=[10.0], mutable=True, persistent=True, ts_device=167.189638527, ts_mono=11474.095108553),
        mock(name='ctl.num_attempts', type_id=ValueType.U32, cached=[100], default=[100], min=[1], max=[10000000],
             mutable=True, persistent=True, ts_device=167.22092805, ts_mono=11474.095134015),
        mock(name='ctl.vm_cci_comp', type_id=ValueType.BOOLEAN, cached=[False], default=[False], min=[False],
             max=[True], mutable=True, persistent=True, ts_device=167.252589227, ts_mono=11474.095157437),
        mock(name='ctl.vm_oversatur', type_id=ValueType.BOOLEAN, cached=[False], default=[False], min=[False],
             max=[True], mutable=True, persistent=True, ts_device=167.283183261, ts_mono=11474.09518067),
        mock(name='ctl.vm_pppwm_thr', type_id=ValueType.F32, cached=[0.949999988079071], default=[0.949999988079071],
             min=[0.0], max=[1.0], mutable=True, persistent=True, ts_device=167.313057172, ts_mono=11474.095203923),
        mock(name='m.num_poles', type_id=ValueType.U8, cached=[14], default=[0], min=[0], max=[200], mutable=True,
             persistent=True, ts_device=167.343252161, ts_mono=11474.095226993),
        mock(name='m.max_current', type_id=ValueType.F32, cached=[14.0], default=[0.0], min=[0.0], max=[200.0],
             mutable=True, persistent=True, ts_device=167.369294972, ts_mono=11474.095250044),
        mock(name='m.min_current', type_id=ValueType.F32, cached=[0.3499999940395355], default=[0.0], min=[0.0],
             max=[50.0], mutable=True, persistent=True, ts_device=167.398127294, ts_mono=11474.095273253),
        mock(name='m.spup_current_l', type_id=ValueType.F32, cached=[0.699999988079071], default=[0.0], min=[0.0],
             max=[50.0], mutable=True, persistent=True, ts_device=167.427121272, ts_mono=11474.095296358),
        mock(name='m.spup_current_h', type_id=ValueType.F32, cached=[7.0], default=[0.0], min=[0.0], max=[50.0],
             mutable=True, persistent=True, ts_device=167.457667294, ts_mono=11474.095321345),
        mock(name='m.phi_milliweber', type_id=ValueType.F32, cached=[0.9692422747612], default=[0.0], min=[0.0],
             max=[500.0], mutable=True, persistent=True, ts_device=167.487963305, ts_mono=11474.095344579),
        mock(name='m.rs_ohm', type_id=ValueType.F32, cached=[0.09571981430053711], default=[0.0], min=[0.0], max=[10.0],
             mutable=True, persistent=True, ts_device=167.517682005, ts_mono=11474.095367282),
        mock(name='m.ld_microhenry', type_id=ValueType.F32, cached=[12.47910213470459], default=[0.0], min=[0.0],
             max=[500000.0], mutable=True, persistent=True, ts_device=167.54309675, ts_mono=11474.095390037),
        mock(name='m.lq_microhenry', type_id=ValueType.F32, cached=[12.47910213470459], default=[0.0], min=[0.0],
             max=[500000.0], mutable=True, persistent=True, ts_device=167.573339927, ts_mono=11474.09541249),
        mock(name='m.min_eangvel', type_id=ValueType.F32, cached=[400.0], default=[400.0], min=[10.0], max=[1000.0],
             mutable=True, persistent=True, ts_device=167.602944972, ts_mono=11474.095435058),
        mock(name='m.max_eangvel', type_id=ValueType.F32, cached=[5000.0], default=[10000.0], min=[10.0], max=[20000.0],
             mutable=True, persistent=True, ts_device=167.631806272, ts_mono=11474.095458084),
        mock(name='m.current_ramp', type_id=ValueType.F32, cached=[100.0], default=[100.0], min=[0.10000000149011612],
             max=[10000.0], mutable=True, persistent=True, ts_device=167.660413072, ts_mono=11474.095481023),
        mock(name='m.voltage_ramp', type_id=ValueType.F32, cached=[20.0], default=[20.0], min=[0.009999999776482582],
             max=[1000.0], mutable=True, persistent=True, ts_device=167.689644772, ts_mono=11474.095556567),
        mock(name='m.eangvel_rampup', type_id=ValueType.F32, cached=[2000.0], default=[2000.0],
             min=[0.009999999776482582], max=[1000000.0], mutable=True, persistent=True, ts_device=167.719028994,
             ts_mono=11474.095586866),
        mock(name='m.eangvel_rampdn', type_id=ValueType.F32, cached=[2000.0], default=[0.0], min=[0.0], max=[1000000.0],
             mutable=True, persistent=True, ts_device=167.749470094, ts_mono=11474.095610592),
        mock(name='m.eangvel_ctl_kp', type_id=ValueType.F32, cached=[0.003000000026077032],
             default=[0.003000000026077032], min=[0.0], max=[100.0], mutable=True, persistent=True,
             ts_device=167.77973525, ts_mono=11474.095634679),
        mock(name='m.eangvel_ctl_ki', type_id=ValueType.F32, cached=[0.0010000000474974513],
             default=[0.0010000000474974513], min=[0.0], max=[100.0], mutable=True, persistent=True,
             ts_device=167.809852683, ts_mono=11474.09565974),
        mock(name='m.current_ctl_bw', type_id=ValueType.F32, cached=[0.019999999552965164],
             default=[0.019999999552965164], min=[9.999999747378752e-06], max=[0.5], mutable=True, persistent=True,
             ts_device=167.840277894, ts_mono=11474.095685348),
        mock(name='mid.phi.curr_mul', type_id=ValueType.F32, cached=[0.30000001192092896],
             default=[0.30000001192092896], min=[0.10000000149011612], max=[1.0], mutable=True, persistent=True,
             ts_device=167.870644161, ts_mono=11474.095708942),
        mock(name='mid.phi.eangvel', type_id=ValueType.F32, cached=[300.0], default=[300.0], min=[50.0], max=[2000.0],
             mutable=True, persistent=True, ts_device=167.900911227, ts_mono=11474.095732269),
        mock(name='mid.phi.stall_th', type_id=ValueType.F32, cached=[5.0], default=[5.0], min=[2.0], max=[20.0],
             mutable=True, persistent=True, ts_device=167.93105435, ts_mono=11474.095755858),
        mock(name='mid.l.curr_mul', type_id=ValueType.F32, cached=[0.05999999865889549], default=[0.05999999865889549],
             min=[0.009999999776482582], max=[0.5], mutable=True, persistent=True, ts_device=167.961478361,
             ts_mono=11474.095782118),
        mock(name='mid.l.curr_freq', type_id=ValueType.F32, cached=[900.0], default=[900.0], min=[50.0], max=[1500.0],
             mutable=True, persistent=True, ts_device=167.99063795, ts_mono=11474.095807649),
        mock(name='mid.r.curr_mul', type_id=ValueType.F32, cached=[0.30000001192092896], default=[0.30000001192092896],
             min=[0.05000000074505806], max=[1.0], mutable=True, persistent=True, ts_device=168.02053605,
             ts_mono=11474.095831341),
        mock(name='o.type', type_id=ValueType.BOOLEAN, cached=[False], default=[False], min=[False], max=[True],
             mutable=True, persistent=True, ts_device=168.048972783, ts_mono=11474.095858845),
        mock(name='o.ekf.q_id', type_id=ValueType.F32, cached=[1000000.0], default=[30000.0], min=[0.10000000149011612],
             max=[1000000000.0], mutable=True, persistent=True, ts_device=168.07176205, ts_mono=11474.095884825),
        mock(name='o.ekf.q_iq', type_id=ValueType.F32, cached=[100000000.0], default=[300000.0],
             min=[0.10000000149011612], max=[1000000000.0], mutable=True, persistent=True, ts_device=168.098169505,
             ts_mono=11474.095908585),
        mock(name='o.ekf.q_eangvel', type_id=ValueType.F32, cached=[1000000000.0], default=[300000000.0],
             min=[0.10000000149011612], max=[1000000000.0], mutable=True, persistent=True, ts_device=168.124119783,
             ts_mono=11474.095935612),
        mock(name='o.ekf.p0_idq', type_id=ValueType.F32, cached=[0.0010000000474974513],
             default=[0.0010000000474974513], min=[0.0], max=[1000000.0], mutable=True, persistent=True,
             ts_device=168.152991494, ts_mono=11474.095976266),
        mock(name='o.ekf.p0_eangvel', type_id=ValueType.F32, cached=[0.0010000000474974513],
             default=[0.0010000000474974513], min=[0.0], max=[1000000.0], mutable=True, persistent=True,
             ts_device=168.180930294, ts_mono=11474.096031996),
        mock(name='o.ekf.cc_comp', type_id=ValueType.F32, cached=[0.0], default=[0.0], min=[0.0], max=[10.0],
             mutable=True, persistent=True, ts_device=168.211163661, ts_mono=11474.096078469),
        mock(name='o.mras.gain', type_id=ValueType.F32, cached=[150000.0], default=[150000.0],
             min=[0.0010000000474974513], max=[1000000.0], mutable=True, persistent=True, ts_device=168.23962725,
             ts_mono=11474.096112982),
        mock(name='bec.can_pwr_on', type_id=ValueType.BOOLEAN, cached=[False], default=[False], min=[False], max=[True],
             mutable=True, persistent=True, ts_device=168.266927538, ts_mono=11474.096137455),
        mock(name='uavcan.esc_index', type_id=ValueType.U8, cached=[0], default=[0], min=[0], max=[15], mutable=True,
             persistent=True, ts_device=168.295695294, ts_mono=11474.0961611),
        mock(name='uavcan.esc_ttl', type_id=ValueType.F32, cached=[0.30000001192092896], default=[0.30000001192092896],
             min=[0.10000000149011612], max=[10.0], mutable=True, persistent=True, ts_device=168.325321394,
             ts_mono=11474.096187528),
        mock(name='uavcan.esc_sint', type_id=ValueType.F32, cached=[0.05000000074505806], default=[0.05000000074505806],
             min=[0.009999999776482582], max=[1.0], mutable=True, persistent=True, ts_device=168.354900616,
             ts_mono=11474.096214092),
        mock(name='uavcan.esc_sintp', type_id=ValueType.F32, cached=[0.5], default=[0.5], min=[0.009999999776482582],
             max=[10.0], mutable=True, persistent=True, ts_device=168.384844983, ts_mono=11474.096241364),
        mock(name='uavcan.esc_rcm', type_id=ValueType.U8, cached=[1], default=[1], min=[0], max=[2], mutable=True,
             persistent=True, ts_device=168.415360083, ts_mono=11474.096265363),
        mock(name='uavcan.node_id', type_id=ValueType.U8, cached=[0], default=[0], min=[0], max=[125], mutable=True,
             persistent=True, ts_device=168.443844627, ts_mono=11474.096288244),
        mock(name='uavcan.transfer_cnt.error', type_id=ValueType.U64, cached=[0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.473500294, ts_mono=11474.09631309),
        mock(name='uavcan.transfer_cnt.rx', type_id=ValueType.U64, cached=[0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.482784538, ts_mono=11474.096334935),
        mock(name='uavcan.transfer_cnt.tx', type_id=ValueType.U64, cached=[0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.491846672, ts_mono=11474.09635874),
        mock(name='ctrl.task_switch_count', type_id=ValueType.U32, cached=[0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.500842172, ts_mono=11474.096381102),
        mock(name='vsi.motor_temp', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.508704905, ts_mono=11474.096429273),
        mock(name='vsi.cpu_temp', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None, mutable=False,
             persistent=False, ts_device=168.515967938, ts_mono=11474.096475768),
        mock(name='vsi.vsi_temp', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None, mutable=False,
             persistent=False, ts_device=168.522875594, ts_mono=11474.096519214),
        mock(name='vsi.pwm_irq_duration', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.530338527, ts_mono=11474.09654562),
        mock(name='vsi.phase_voltage_error', type_id=ValueType.F32, cached=[0.0, 0.0, 0.0], default=None, min=None,
             max=None, mutable=False, persistent=False, ts_device=168.53857885, ts_mono=11474.09657154),
        mock(name='vsi.hw_flag_cnt.fault', type_id=ValueType.U32, cached=[0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.547752038, ts_mono=11474.096593609),
        mock(name='vsi.hw_flag_cnt.overload', type_id=ValueType.U32, cached=[0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.556525427, ts_mono=11474.096651339),
        mock(name='vsi.hw_flag_cnt.lvps_malfunction', type_id=ValueType.U32, cached=[0], default=None, min=None,
             max=None, mutable=False, persistent=False, ts_device=168.566342738, ts_mono=11474.096678888),
        mock(name='vsi.phase_voltage', type_id=ValueType.F32, cached=[0.0, 0.0, 0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.575515927, ts_mono=11474.09671855),
        mock(name='vsi.phase_current', type_id=ValueType.F32, cached=[0.0, 0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.583911727, ts_mono=11474.096745765),
        mock(name='vsi.dc_current_lpf', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.59195215, ts_mono=11474.096768286),
        mock(name='vsi.dc_current', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.599614983, ts_mono=11474.096790113),
        mock(name='vsi.dc_voltage_lpf', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.607077916, ts_mono=11474.096811819),
        mock(name='vsi.dc_voltage', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.614829594, ts_mono=11474.096833574),
        mock(name='vsi.current_gain_level', type_id=ValueType.BOOLEAN, cached=[True], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.622847805, ts_mono=11474.096857869),
        mock(name='motor.pwm_setpoint', type_id=ValueType.F32, cached=[0.0, 0.0, 0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.630754961, ts_mono=11474.09688225),
        mock(name='motor.electrical_angle', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.639839305, ts_mono=11474.09690772),
        mock(name='motor.scalar.frequency', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.648634905, ts_mono=11474.0969341),
        mock(name='motor.id.phi_noise_threshold', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.657585983, ts_mono=11474.096956255),
        mock(name='motor.id.phi_noise_sample', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.666981283, ts_mono=11474.096980231),
        mock(name='motor.id.phi', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None, mutable=False,
             persistent=False, ts_device=168.674888438, ts_mono=11474.09700427),
        mock(name='motor.id.raw_phi', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.682195894, ts_mono=11474.097026366),
        mock(name='motor.setpoint_q', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.690036416, ts_mono=11474.0970501),
        mock(name='motor.electrical_angular_velocity', type_id=ValueType.F32, cached=[0.0], default=None, min=None,
             max=None, mutable=False, persistent=False, ts_device=168.699209605, ts_mono=11474.097072857),
        mock(name='motor.u_dq', type_id=ValueType.F32, cached=[0.0, 0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.707583194, ts_mono=11474.097096338),
        mock(name='motor.i_dq', type_id=ValueType.F32, cached=[0.0, 0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.714402005, ts_mono=11474.097118982),
        mock(name='observer.variance.electrical_angle', type_id=ValueType.F32, cached=[0.0], default=None, min=None,
             max=None, mutable=False, persistent=False, ts_device=168.723330872, ts_mono=11474.097144446),
        mock(name='observer.variance.electrical_ang_vel', type_id=ValueType.F32, cached=[0.0], default=None, min=None,
             max=None, mutable=False, persistent=False, ts_device=168.734192105, ts_mono=11474.097168879),
        mock(name='observer.variance.i_q', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.743765094, ts_mono=11474.097190949),
        mock(name='observer.variance.i_d', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.752205316, ts_mono=11474.097212606),
        mock(name='observer.x', type_id=ValueType.F32, cached=[0.0, 0.0, 0.0, 0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.768175105, ts_mono=11474.097234168),
        mock(name='setpoint.elect_ang_vel_ctrl.integral', type_id=ValueType.F32, cached=[0.0], default=None, min=None,
             max=None, mutable=False, persistent=False, ts_device=168.777970205, ts_mono=11474.097256111),
        mock(name='setpoint.electrical_angular_velocity', type_id=ValueType.F32, cached=[0.0], default=None, min=None,
             max=None, mutable=False, persistent=False, ts_device=168.789075761, ts_mono=11474.097282835),
        mock(name='motor.i_q_pid.error_integral', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.799670461, ts_mono=11474.097305723),
        mock(name='motor.i_d_pid.error_integral', type_id=ValueType.F32, cached=[0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.809398927, ts_mono=11474.097327512),
        mock(name='motor.passive_phase_modulation_on', type_id=ValueType.BOOLEAN, cached=[False], default=None,
             min=None, max=None, mutable=False, persistent=False, ts_device=168.819704883, ts_mono=11474.097349266),
        mock(name='motor.phase_voltage_setpoint', type_id=ValueType.F32, cached=[0.0, 0.0, 0.0], default=None, min=None,
             max=None, mutable=False, persistent=False, ts_device=168.829588827, ts_mono=11474.097374602),
        mock(name='motor.u_dq_setpoint', type_id=ValueType.F32, cached=[0.0, 0.0], default=None, min=None, max=None,
             mutable=False, persistent=False, ts_device=168.839961416, ts_mono=11474.097399175),
    ]
